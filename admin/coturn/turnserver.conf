# Coturn TURN Server Configuration
# For WebRTC voice calls in HIO Check-in Kiosk

# Listening port for TURN server (default 3478)
listening-port=3478

# TLS listening port (optional, for secure connections)
tls-listening-port=5349

# Relay ports range for media traffic
min-port=49152
max-port=65535

# Enable verbose logging (change to 0 in production)
verbose

# Realm for TURN authentication (change to your domain)
realm=kiosk.hio.ai.kr

# TURN server external IP (IMPORTANT: Set to your server's public IP)
# Example: external-ip=203.0.113.10
# For local testing, you can use the container IP or leave commented
# external-ip=YOUR_PUBLIC_IP_HERE

# Static authentication credentials
# Username and password for TURN authentication
# Change these to secure random values in production!
user=turnuser:turnpassword

# Alternative: Use long-term credentials (more secure)
# lt-cred-mech

# Database for dynamic user management (optional)
# userdb=/var/lib/coturn/turndb

# No TLS required (set to 1 to require TLS)
no-tls
no-dtls

# Allow connections from localhost and Docker network
no-loopback-peers
no-multicast-peers

# Deny TURN functionality for specific IP addresses (optional)
# denied-peer-ip=0.0.0.0-0.255.255.255
# denied-peer-ip=127.0.0.0-127.255.255.255

# Allow TURN functionality for specific IP ranges (optional)
# allowed-peer-ip=10.0.0.0-10.255.255.255

# Fingerprint in TURN messages
fingerprint

# Log file location (inside container)
log-file=/var/log/coturn/turnserver.log

# Simple log (not verbose, good for production)
simple-log

# Mobility with ICE (helps with NAT traversal)
mobility

# Allocate relay endpoints with random ports
no-cli

# Disable TCP relay endpoints (UDP only, for better performance)
# Uncomment if you want UDP only
# no-tcp-relay

# Enable prometheus monitoring (optional)
# prometheus

# Web admin interface (optional, disable in production)
# web-admin
# web-admin-ip=0.0.0.0
# web-admin-port=8080

# Security: Disable older protocols
no-tlsv1
no-tlsv1_1

# Quota: Limit bandwidth per user (optional)
# max-bps=1000000
# bps-capacity=0

# Total quota for all users (optional)
# total-quota=100

# Session duration limits (in seconds)
# max-allocate-lifetime=3600
# channel-lifetime=600

# Disable software attribute in TURN messages (security)
no-software-attribute

# Response origin only from the same IP family (IPv4/IPv6)
response-origin-only-with-rfc5780

# Alternate server (for failover, optional)
# alternate-server=turn2.example.com:3478

# Certificate files for TLS (required if using TLS)
# cert=/etc/coturn/turn_server_cert.pem
# pkey=/etc/coturn/turn_server_pkey.pem

# CA file for certificate validation (optional)
# CA-file=/etc/coturn/ca.pem

# DH parameters file for TLS (optional, improves security)
# dh-file=/etc/coturn/dh2066.pem

# Cipher list for TLS (optional)
# cipher-list="ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384"

# Production recommendations:
# 1. Set external-ip to your server's public IP
# 2. Change user credentials to secure random values
# 3. Set verbose=0 or remove it for less logging
# 4. Enable TLS if you have SSL certificates
# 5. Consider using lt-cred-mech with database for dynamic users
